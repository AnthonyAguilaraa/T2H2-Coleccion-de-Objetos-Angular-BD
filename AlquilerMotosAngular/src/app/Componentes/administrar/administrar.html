<div class="admin-container">
  
  <div class="admin-header">
    <h2>âš™ï¸ Panel de AdministraciÃ³n</h2>
    <button *ngIf="vistaActual !== 'MENU'" (click)="cambiarVista('MENU')" class="btn-back">
      â¬… Volver al MenÃº
    </button>
  </div>

  <div *ngIf="vistaActual === 'MENU'" class="dashboard-grid">
    
    <div class="card-menu" (click)="cambiarVista('CLIENTES')">
      <div class="icon">ğŸ‘¤</div>
      <h3>GestiÃ³n Clientes</h3>
      <p>Crear y eliminar clientes</p>
    </div>

    <div class="card-menu" (click)="cambiarVista('VEHICULOS')">
      <div class="icon">ğŸš²</div>
      <h3>GestiÃ³n VehÃ­culos</h3>
      <p>Flota y tarifas</p>
    </div>

    <div class="card-menu" (click)="cambiarVista('ALQUILERES')">
      <div class="icon">ğŸ“…</div>
      <h3>GestiÃ³n Alquileres</h3>
      <p>Historial y cancelaciones</p>
    </div>

    <div class="card-menu" (click)="cambiarVista('DEVOLUCIONES')">
      <div class="icon">âœ…</div>
      <h3>Historial Devoluciones</h3>
      <p>Ver finalizados</p>
    </div>

  </div>

  <div *ngIf="vistaActual === 'CLIENTES'" class="crud-panel">
    <h3>ğŸ‘¤ Administrar Clientes</h3>
    <div class="form-row">
      <input class="input" placeholder="ID" type="number" [(ngModel)]="nuevoCliente.id">
      <input class="input" placeholder="Nombre" [(ngModel)]="nuevoCliente.nombre">
      <input class="input" placeholder="Edad" type="number" [(ngModel)]="nuevoCliente.edad">
      <label><input type="checkbox" [(ngModel)]="nuevoCliente.esFrecuente"> Frecuente</label>
      <button (click)="crearCliente()">Agregar</button>
    </div>
    <ul class="list-group">
      <li *ngFor="let c of clientes$ | async">
        {{c.id}} - {{c.nombre}} ({{c.edad}}) 
        <span class="tag" *ngIf="c.esFrecuente">VIP</span>
        <button class="btn-delete" (click)="eliminarCliente(c.id)">ğŸ—‘ï¸</button>
      </li>
    </ul>
  </div>

  <div *ngIf="vistaActual === 'VEHICULOS'" class="crud-panel">
    <h3>ğŸš² Administrar VehÃ­culos</h3>
    <div class="form-row">
      <input class="input" placeholder="CÃ³d" [(ngModel)]="nuevoVehiculo.codigo">
      <input class="input" placeholder="Nombre" [(ngModel)]="nuevoVehiculo.nombre">
      <input class="input" placeholder="Tarifa" type="number" [(ngModel)]="nuevoVehiculo.tarifaDia">
      <label><input type="checkbox" [(ngModel)]="nuevoVehiculo.requiereEdad"> +18</label>
      <button (click)="crearVehiculo()">Agregar</button>
    </div>
    <ul class="list-group">
      <li *ngFor="let v of vehiculos$ | async">
        [{{v.codigo}}] {{v.nombre}} - ${{v.tarifaDia}}
        <span [class]="v.estado">{{v.estado}}</span>
        <button class="btn-delete" (click)="eliminarVehiculo(v.codigo)">ğŸ—‘ï¸</button>
      </li>
    </ul>
  </div>

  <div *ngIf="vistaActual === 'ALQUILERES'" class="crud-panel">
    <h3>ğŸ“… Todos los Alquileres (Activos)</h3>
    <table class="admin-table">
      <thead><tr><th>ID</th><th>Cliente</th><th>VehÃ­culo</th><th>Estado</th><th>AcciÃ³n</th></tr></thead>
      <tbody>
        <tr *ngFor="let a of alquileres$ | async">
          <ng-container *ngIf="a.estado === 'ACTIVO'">
            <td>{{a.id}}</td>
            <td>{{a.clienteId}}</td>
            <td>{{a.vehiculoCodigo}}</td>
            <td class="status-active">En Curso</td>
            <td><button class="btn-delete" (click)="eliminarAlquiler(a.id)">Cancelar</button></td>
          </ng-container>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="vistaActual === 'DEVOLUCIONES'" class="crud-panel">
    <h3>âœ… Historial de Finalizados</h3>
    <table class="admin-table">
      <thead><tr><th>ID</th><th>Cliente</th><th>VehÃ­culo</th><th>DevoluciÃ³n</th><th>Multa</th><th>AcciÃ³n</th></tr></thead>
      <tbody>
        <tr *ngFor="let a of alquileres$ | async">
          <ng-container *ngIf="a.estado === 'FINALIZADO'">
            <td>{{a.id}}</td>
            <td>{{a.clienteId}}</td>
            <td>{{a.vehiculoCodigo}}</td>
            <td>{{a.fechaDevolucionReal | date:'shortDate'}}</td>
            <td>{{a.multa | currency}}</td>
            <td><button class="btn-delete" (click)="eliminarAlquiler(a.id)">Borrar</button></td>
          </ng-container>
        </tr>
      </tbody>
    </table>
  </div>

</div>